Real-Time Messaging API
=====================================

This repository structure is inspired by [Immutable.js](https://github.com/facebook/immutable-js)'s repo structure

Usage
-----

```
$ yarn add @pearsontechnology/aero-rtm
```

```js
import rtm from '@pearsontechnology/aero-rtm';

rtm.open('wss://dev-mercury.phx-spr.com/socket', { email: 'citrus@dev.dev', password: 'password' })
  .then((/* RtmConnection */ connection) => {
    connection.fetch('time')
      .then((responseMessage) => {
        console.log(`The response type was ${responseMessage.type}`); // time.ok
        console.log(`The current time is ${responseMessage.response.rfc1123}`);
      });

    let subscription;
    connection.subscribe({ type: 'time.subscribe', interval: 1 }, (broadcastMessage) => {
      console.log(`The response type was ${broadcastMessage.type}`); // time.broadcast
      console.log(`The updated time is ${broadcastMessage.response.rfc1123}`);

      subscription.unsubscribe('time.unsubscribe').then((unsubscribeConfirmation) => {
        connection.close();
      });
    }).then((sub) => {
      subscription = sub;
    });
  });

```

Requirements
-----

- `Promise` (Edge, Chrome, Firefox, Safari 8+)
- `WebSocket` (IE10+, Edge, Chrome, Firefox, Safari)

You will need to polyfill these yourself, especially `Promise` for IE

Developing the library
-----

```
yarn install
yarn build
```

